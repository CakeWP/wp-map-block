{"version":3,"file":"wpmapblock-frontend.core.min.js","mappings":"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","sources":["webpack://wp-map-block/./src/frontend.js"],"sourcesContent":["jQuery(document).ready(function () {\r\n\tconst WPMapBlockRender = (element, ID, Settings) => {\r\n\t\tvar OSM = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\";\r\n\t\tvar GM =\r\n\t\t\t\"https://maps.googleapis.com/maps/vt?pb=!1m5!1m4!1i{z}!2i{x}!3i{y}!4i256!2m3!1e0!2sm!3i349018013!3m9!2sen-US!3sUS!5e18!12m1!1e47!12m3!1e37!2m1!1ssmartmaps!4e0\";\r\n\t\tvar cities = L.layerGroup();\r\n\r\n\t\tSettings.map_marker.forEach(function (item, index) {\r\n\t\t\tvar popup = document.createElement(\"div\");\r\n\r\n\t\t\tpopup.className = \"map-popup\";\r\n\t\t\tpopup.setAttribute(\"data-markerindex\", index.toString());\r\n\r\n\t\t\tvar popupHtml = \"\";\r\n\r\n\t\t\t// Close icon.\r\n\t\t\tpopupHtml += `<div class=\"popup-header\">\r\n\t\t\t${item.title !== \"\" ? \"<h3 class='popup-title'>\" + item.title + \"</h3>\" : \"\"}\r\n\t\t\t<div class=\"close-toggle\">\r\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\"\r\n\t\t\twidth=\"24\" height=\"24\"\r\n\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\tstyle=\" fill:#000000;\"><path d=\"M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z\"></path></svg>\r\n\t\t\t</div>\r\n\t\t\t</div>`;\r\n\t\t\tconsole.log(item);\r\n\t\t\tif (item.subtitle !== \"\") {\r\n\t\t\t\tpopupHtml += \"<p class='popup-subtitle'>\" + item.subtitle + \"</p>\";\r\n\t\t\t}\r\n\t\t\tif (item.content !== \"\") {\r\n\t\t\t\tpopupHtml += \"<pre>\" + item.content + \"</pre>\";\r\n\t\t\t}\r\n\t\t\tpopup.innerHTML = popupHtml;\r\n\t\t\tif (item.images.length > 0) {\r\n\t\t\t\tlet imageWrapper = document.createElement(\"div\");\r\n\t\t\t\timageWrapper.classList.add(\"popup-image-wrapper\");\r\n\t\t\t\titem.images.map((img) => {\r\n\t\t\t\t\tlet image = document.createElement(\"img\");\r\n\r\n\t\t\t\t\timage.setAttribute(\"src\", img.sizes.thumbnail.url);\r\n\t\t\t\t\timageWrapper.appendChild(image);\r\n\t\t\t\t});\r\n\t\t\t\tpopup.appendChild(imageWrapper);\r\n\t\t\t}\r\n\t\t\telement.appendChild(popup);\r\n\t\t\tconst currentPopup = element.querySelector(\r\n\t\t\t\t`.map-popup[data-markerindex=\"${index}\"]`\r\n\t\t\t);\r\n\t\t\tconst closeToggle = element.querySelector(\".close-toggle\");\r\n\r\n\t\t\tcloseToggle.addEventListener(\"click\", () => {\r\n\t\t\t\tif (currentPopup.classList.contains(\"is-visible\")) {\r\n\t\t\t\t\tcurrentPopup.classList.remove(\"is-visible\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (item.iconType == \"custom\") {\r\n\t\t\t\tvar LeafIcon = L.Icon.extend({\r\n\t\t\t\t\toptions: {\r\n\t\t\t\t\t\ticonSize: [item.customIconWidth, item.customIconHeight],\r\n\t\t\t\t\t\tpopupAnchor: [0, -15],\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tvar icon = new LeafIcon({ iconUrl: item.customIconUrl });\r\n\t\t\t\tif (item.title !== \"\" || item.content !== \"\") {\r\n\t\t\t\t\tL.marker([item.lat, item.lng], { icon: icon })\r\n\t\t\t\t\t\t.bindPopup(popupHTML)\r\n\t\t\t\t\t\t.addTo(cities);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tL.marker([item.lat, item.lng], { icon: icon }).addTo(cities);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (item.title !== \"\" || item.content !== \"\") {\r\n\t\t\t\t\tL.marker([item.lat, item.lng])\r\n\t\t\t\t\t\t.addTo(cities)\r\n\t\t\t\t\t\t.on(\"click\", () => {\r\n\t\t\t\t\t\t\tcurrentPopup.classList.toggle(\"is-visible\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tL.marker([item.lat, item.lng]).addTo(cities);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tvar mapType = Settings.map_type === \"OSM\" ? OSM : GM;\r\n\t\tvar grayscale = L.tileLayer(mapType, {\r\n\t\t\tid: \"mapbox/light-v9\",\r\n\t\t});\r\n\t\tlet config = {\r\n\t\t\tzoom: Settings.map_zoom,\r\n\t\t\tlayers: [grayscale, cities],\r\n\t\t\tscrollWheelZoom: Settings.scroll_wheel_zoom,\r\n\t\t};\r\n\t\tif (Settings.map_marker.length) {\r\n\t\t\tconfig.center = [\r\n\t\t\t\tSettings.map_marker[Settings.center_index].lat,\r\n\t\t\t\tSettings.map_marker[Settings.center_index].lng,\r\n\t\t\t];\r\n\t\t}\r\n\t\tL.map(ID, config);\r\n\t};\r\n\tif (jQuery(\".wpmapblockrender\").length) {\r\n\t\tjQuery(\".wpmapblockrender\").each((index, element) => {\r\n\t\t\tconst Element = jQuery(element);\r\n\t\t\tWPMapBlockRender(\r\n\t\t\t\telement,\r\n\t\t\t\tElement.attr(\"ID\"),\r\n\t\t\t\tJSON.parse(Element.attr(\"data-settings\"))\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n});\r\n"],"names":["jQuery","document","ready","WPMapBlockRender","element","ID","Settings","OSM","GM","cities","L","layerGroup","map_marker","forEach","item","index","popup","createElement","className","setAttribute","toString","popupHtml","title","console","log","subtitle","content","innerHTML","images","length","imageWrapper","classList","add","map","img","image","sizes","thumbnail","url","appendChild","currentPopup","querySelector","closeToggle","addEventListener","contains","remove","iconType","LeafIcon","Icon","extend","options","iconSize","customIconWidth","customIconHeight","popupAnchor","icon","iconUrl","customIconUrl","marker","lat","lng","bindPopup","popupHTML","addTo","on","toggle","mapType","map_type","grayscale","tileLayer","id","config","zoom","map_zoom","layers","scrollWheelZoom","scroll_wheel_zoom","center","center_index","each","Element","attr","JSON","parse"],"sourceRoot":""}